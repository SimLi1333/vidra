<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/concepts" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.0">
<title data-rh="true">Concepts | My Site</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://infrahub-operator.github.io/vidra/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://infrahub-operator.github.io/vidra/img/social-card.png"><meta data-rh="true" property="og:url" content="https://infrahub-operator.github.io/vidra/concepts/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Concepts | My Site"><meta data-rh="true" name="description" content="Infrahub"><meta data-rh="true" property="og:description" content="Infrahub"><link data-rh="true" rel="icon" href="/vidra/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://infrahub-operator.github.io/vidra/concepts/"><link data-rh="true" rel="alternate" href="https://infrahub-operator.github.io/vidra/concepts/" hreflang="en"><link data-rh="true" rel="alternate" href="https://infrahub-operator.github.io/vidra/concepts/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Concepts","item":"https://infrahub-operator.github.io/vidra/concepts/"}]}</script><link rel="alternate" type="application/rss+xml" href="/vidra/blog/rss.xml" title="My Site RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/vidra/blog/atom.xml" title="My Site Atom Feed"><link rel="stylesheet" href="/vidra/assets/css/styles.c171c55a.css">
<script src="/vidra/assets/js/runtime~main.5dbf4a7c.js" defer="defer"></script>
<script src="/vidra/assets/js/main.378288ce.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/vidra/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/vidra/"><div class="navbar__logo"><img src="/vidra/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/vidra/img/logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Vidra</b></a><a class="navbar__item navbar__link" href="/vidra/">Documentation</a><a class="navbar__item navbar__link" href="/vidra/cli/">CLI</a><a class="navbar__item navbar__link" href="/vidra/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a href="https://github.com/infrahub-operator/vidra" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vidra/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" href="/vidra/concepts/">Concepts</a><button aria-label="Collapse sidebar category &#x27;Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/vidra/concepts/features">Features</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/vidra/guides/install">Guides</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vidra/api-references/">API References</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/vidra/topics/architecture">Topics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vidra/comparison/">Comparison</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/vidra/about/">About</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/vidra/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Concepts</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Concepts</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrahub">Infrahub<a href="#infrahub" class="hash-link" aria-label="Direct link to Infrahub" title="Direct link to Infrahub">​</a></h2>
<p><strong>Infrahub</strong> is a metadata platform that stores information about infrastructure components such as servers, services, environments, or configurations. It acts as a centralized source of truth for discovering and querying infrastructure relationships and attributes, enabling use cases like documentation, automation, and auditing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vidra-operator">Vidra Operator<a href="#vidra-operator" class="hash-link" aria-label="Direct link to Vidra Operator" title="Direct link to Vidra Operator">​</a></h2>
<p>The <strong>Vidra Operator</strong> is a Kubernetes Operator responsible for keeping Kubernetes resources in sync with metadata stored in Infrahub. It automates the creation and update of Kubernetes Custom Resources (CRs) based on artifacts retrieved from Infrahub queries. Vidra enables dynamic reconciliation of infrastructure data into the Kubernetes control plane.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="artifact">Artifact<a href="#artifact" class="hash-link" aria-label="Direct link to Artifact" title="Direct link to Artifact">​</a></h2>
<p>An <strong>Artifact</strong> in this context refers to a structured result (usually JSON or YAML) retrieved from Infrahub using a query. These artifacts may describe infrastructure entities such as virtual machines, web-services, or any other kubernetes resources, and are the source data Vidra uses to drive reconciliation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="infrahubsync">InfrahubSync<a href="#infrahubsync" class="hash-link" aria-label="Direct link to InfrahubSync" title="Direct link to InfrahubSync">​</a></h2>
<p>An <code>InfrahubSync</code> is a Kubernetes Custom Resource that defines a desired sync operation between Infrahub and Kubernetes. It contains:</p>
<ul>
<li>A <strong>source</strong> section including:<!-- -->
<ul>
<li>The <strong>Infrahub API URL</strong> to connect to.</li>
<li>The <strong>target branche</strong> and <strong>Target Date</strong> to specify which version of the Artifact to use.</li>
<li>A <strong>artifact name</strong> to select the corect data from infrahub.</li>
</ul>
</li>
<li>A <strong>destination</strong> section specifying:<!-- -->
<ul>
<li>The <strong>Kubernetes Server URL</strong> (optional, defaults to the current cluster).</li>
<li>The <strong>Kubernetes namespace</strong> where the resources should be created.</li>
</ul>
</li>
<li>A <strong>status</strong> section showing the current state of the sync operation.</li>
</ul>
<p>The Vidra Operator watches these resources and ensures the corresponding Kubernetes resources are created or updated as needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vidraresource">VidraResource<a href="#vidraresource" class="hash-link" aria-label="Direct link to VidraResource" title="Direct link to VidraResource">​</a></h2>
<p>An <code>VidraResource</code> is a Kubernetes CR created and managed by the Vidra Operator based on the results of an <code>InfrahubSync</code>. Each <code>VidraResource</code> corresponds to a specific resource from Infrahub and contains:</p>
<ul>
<li>A <strong>artifact ID</strong> identifying the unique Artifact in Infrahub.</li>
<li><strong>storage ID</strong> and <strong>checksum</strong> for tracking the artifact version.</li>
<li>The <strong>manifest</strong> field containing the content of the artifact, representing the actual resource definition (usually in JSON or YAML format).</li>
<li>A status field showing the reconciliation status.</li>
</ul>
<p>These CRs act as structured mirrors of the infrastructure state described in Infrahub.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reconciliation">Reconciliation<a href="#reconciliation" class="hash-link" aria-label="Direct link to Reconciliation" title="Direct link to Reconciliation">​</a></h2>
<p>Vidra’s reconciliation process runs when:</p>
<ul>
<li>An <code>InfrahubSync</code> is created or updated.</li>
<li>The scheduled resync interval is triggered.</li>
<li>The Infrahub data changes.</li>
</ul>
<p>During reconciliation, Vidra authenticates with Infrahub, fetches the specified artifact, parses it, and ensures Kubernetes resources match the current state of the Infrahub Artifact.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="managed-resources">Managed Resources<a href="#managed-resources" class="hash-link" aria-label="Direct link to Managed Resources" title="Direct link to Managed Resources">​</a></h2>
<p>Managed resources are the Kubernetes resources created or updated by Vidra based on the <code>VidraResource</code> manifests, downloaded from infrahub. These resources can include any Kubernetes object type, such as:</p>
<ul>
<li>Deployments</li>
<li>Services</li>
<li>Namespaces</li>
<li>ConfigMaps</li>
<li>Custom Resources like <code>VirtualMachine</code> etc.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-structure">Code Structure<a href="#code-structure" class="hash-link" aria-label="Direct link to Code Structure" title="Direct link to Code Structure">​</a></h2>
<p>Vidra separates concerns through a <strong>clean architecture</strong> structure, where domain logic is kept independent of Kubernetes and Infrahub-specific implementation details.</p>
<p>The domain model includes types like:</p>
<ul>
<li><code>Artifact</code></li>
</ul>
<p>The <code>Manifest</code> itselfe is not saved in the domain model, but rather in the <code>VidraResource</code> CR. The domain model focuses on the core logic and operations related to artifacts.</p>
<p>This promotes testability and modularity.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="links">Links<a href="#links" class="hash-link" aria-label="Direct link to Links" title="Direct link to Links">​</a></h2>
<p>To better understand the underlying technologies used in Vidra, refer to the following resources:</p>
<ul>
<li><a href="https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/" target="_blank" rel="noopener noreferrer">Kubernetes</a></li>
<li><a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/" target="_blank" rel="noopener noreferrer">Kubernetes Operator</a></li>
<li><a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank" rel="noopener noreferrer">Custom Resource Definitions</a></li>
<li><a href="https://docs.infrahub.dev/" target="_blank" rel="noopener noreferrer">Infrahub</a></li>
<li><a href="https://sdk.operatorframework.io/docs/" target="_blank" rel="noopener noreferrer">Operator SDK</a></li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/vidra/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/vidra/concepts/features"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Features</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#infrahub" class="table-of-contents__link toc-highlight">Infrahub</a></li><li><a href="#vidra-operator" class="table-of-contents__link toc-highlight">Vidra Operator</a></li><li><a href="#artifact" class="table-of-contents__link toc-highlight">Artifact</a></li><li><a href="#infrahubsync" class="table-of-contents__link toc-highlight">InfrahubSync</a></li><li><a href="#vidraresource" class="table-of-contents__link toc-highlight">VidraResource</a></li><li><a href="#reconciliation" class="table-of-contents__link toc-highlight">Reconciliation</a></li><li><a href="#managed-resources" class="table-of-contents__link toc-highlight">Managed Resources</a></li><li><a href="#code-structure" class="table-of-contents__link toc-highlight">Code Structure</a></li><li><a href="#links" class="table-of-contents__link toc-highlight">Links</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"></div></footer></div>
</body>
</html>